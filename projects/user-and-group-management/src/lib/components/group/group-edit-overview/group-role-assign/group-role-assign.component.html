<div class="controls">
  <button mat-flat-button color="primary" [disabled]="!selectedRolesToAssign || selectedRolesToAssign.length === 0" (click)="assignSelectedRoles()">Add</button>
</div>
<mat-card>
  <mat-card-header>
    <div mat-card-avatar>
      <mat-icon color="primary">add_circle_outline</mat-icon>
    </div>
    <mat-card-title>Add roles</mat-card-title>
    <mat-card-subtitle>Add roles to {{ resource.name }} group </mat-card-subtitle>
  </mat-card-header>
  <mat-card-content>
    <kypo2-resource-selector
      searchPlaceholder="Search roles by name"
      [resources]="roles$ | async"
      [selected]="selectedRolesToAssign"
      [resourceMapping]="roleMapping"
      (selectionChange)="onRolesToAssignSelection($event)"
      (fetch)="search($event)">
    </kypo2-resource-selector>
  </mat-card-content>
</mat-card>
<div class="controls">
  <button *ngIf="this.selectedAssignedRoles.length <= 0 else selectedRolesButton" mat-flat-button color="warn" disabled (click)="deleteSelectedRoles()">Delete</button>
  <ng-template #selectedRolesButton>
    <button mat-flat-button color="warn" (click)="deleteSelectedRoles()">Delete ({{ this.selectedAssignedRoles.length }})</button>
  </ng-template>
</div>

<mat-card>
  <mat-card-header>
    <div mat-card-avatar>
      <mat-icon color="primary">policy</mat-icon>
    </div>
    <mat-card-title> Roles of group {{ resource.name }}</mat-card-title>
  </mat-card-header>
  <mat-card-content>
    <kypo2-table elevation="0"
                 [hasError]="assignedRolesHasError$ | async"
                 [data]="assignedRoles$ | async"
                 [isLoading]="isLoadingAssignedRoles$ | async"
                 (rowAction)="onAssignedRolesTableAction($event)"
                 (rowSelection)="onAssignedRolesSelection($event)">
    </kypo2-table>
  </mat-card-content>
</mat-card>
